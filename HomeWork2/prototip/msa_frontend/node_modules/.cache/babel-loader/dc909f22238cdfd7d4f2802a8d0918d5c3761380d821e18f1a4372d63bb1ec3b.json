{"ast":null,"code":"import React,{useState}from'react';import{Input}from'../components/login/Input';import styles from'./styles/LoginPage.module.css';import{useNavigate}from'react-router-dom';import{login}from'../service/UserService';import{jwtDecode}from'jwt-decode';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const LoginPage=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[errorMessage,setErrorMessage]=useState('');const navigate=useNavigate();const handleSignupClick=()=>{navigate('/sign-up');};const handleSubmit=async e=>{e.preventDefault();const userLoginDTO={email,password};try{const response=await login(userLoginDTO);const token=localStorage.getItem('token');const decodedToken=jwtDecode(token);if(decodedToken.role==='ADMIN'){navigate('/admin');}else{navigate('/');}}catch(error){setErrorMessage('Login failed. Please check your credentials or try again later.');console.error('Login failed:',error);}};return/*#__PURE__*/_jsx(\"div\",{className:styles.container,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.content,children:[/*#__PURE__*/_jsxs(\"h1\",{className:styles.title,children:[\"Macedonian\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:styles.highlight,children:\"Stock\"}),\" Analysis\"]}),/*#__PURE__*/_jsx(\"h2\",{className:styles.loginTitle,children:\"Login\"}),errorMessage&&/*#__PURE__*/_jsx(\"p\",{className:styles.error,children:errorMessage}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:styles.form,children:[/*#__PURE__*/_jsx(Input,{label:\"Email\",value:email,onChange:setEmail,type:\"email\",required:true,placeholder:\"example@gmail.com\"}),/*#__PURE__*/_jsx(Input,{label:\"Password\",value:password,onChange:setPassword,type:\"password\",required:true,placeholder:\"Enter your password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:styles.loginButton,children:\"Login\"}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:styles.signupLink,onClick:handleSignupClick,children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"span\",{className:styles.signupText,children:\"Sign Up\"})]})]})]})});};","map":{"version":3,"names":["React","useState","Input","styles","useNavigate","login","jwtDecode","jsx","_jsx","jsxs","_jsxs","LoginPage","email","setEmail","password","setPassword","errorMessage","setErrorMessage","navigate","handleSignupClick","handleSubmit","e","preventDefault","userLoginDTO","response","token","localStorage","getItem","decodedToken","role","error","console","className","container","children","content","title","highlight","loginTitle","onSubmit","form","label","value","onChange","type","required","placeholder","loginButton","signupLink","onClick","signupText"],"sources":["C:/Users/User/Desktop/MacedonianStockAnalysis/HomeWork2/prototip/msa_frontend/src/pages/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Input } from '../components/login/Input';\r\nimport styles from './styles/LoginPage.module.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { login } from '../service/UserService';\r\nimport { jwtDecode } from 'jwt-decode';\r\n\r\n\r\n\r\nexport const LoginPage = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleSignupClick = () => {\r\n        navigate('/sign-up');\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const userLoginDTO = {\r\n            email,\r\n            password,\r\n        };\r\n\r\n        try {\r\n\r\n            const response = await login(userLoginDTO);\r\n\r\n            const token = localStorage.getItem('token');\r\n            const decodedToken = jwtDecode(token);\r\n\r\n            if (decodedToken.role === 'ADMIN') {\r\n                navigate('/admin');\r\n            } else {\r\n                navigate('/');\r\n            }\r\n        } catch (error) {\r\n\r\n            setErrorMessage('Login failed. Please check your credentials or try again later.');\r\n            console.error('Login failed:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <div className={styles.content}>\r\n                <h1 className={styles.title}>\r\n                    Macedonian\r\n                    <br />\r\n                    <span className={styles.highlight}>Stock</span> Analysis\r\n                </h1>\r\n\r\n                <h2 className={styles.loginTitle}>Login</h2>\r\n\r\n                {/* Display error message if there's any */}\r\n                {errorMessage && <p className={styles.error}>{errorMessage}</p>}\r\n\r\n                {/* Login Form */}\r\n                <form onSubmit={handleSubmit} className={styles.form}>\r\n                    {/* Controlled Input for Email */}\r\n                    <Input\r\n                        label=\"Email\"\r\n                        value={email}\r\n                        onChange={setEmail}\r\n                        type=\"email\"\r\n                        required\r\n                        placeholder=\"example@gmail.com\"\r\n                    />\r\n\r\n                    {/* Controlled Input for Password */}\r\n                    <Input\r\n                        label=\"Password\"\r\n                        value={password}\r\n                        onChange={setPassword}\r\n                        type=\"password\"\r\n                        required\r\n                        placeholder=\"Enter your password\"\r\n                    />\r\n\r\n                    {/* Submit Button */}\r\n                    <button type=\"submit\" className={styles.loginButton}>\r\n                        Login\r\n                    </button>\r\n\r\n                    {/* Sign Up Link */}\r\n                    <button\r\n                        type=\"button\"\r\n                        className={styles.signupLink}\r\n                        onClick={handleSignupClick}\r\n                    >\r\n                        Don't have an account? <span className={styles.signupText}>Sign Up</span>\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}