{"ast":null,"code":"import React,{useState,useEffect}from'react';import Select from'react-select';import{Line}from'react-chartjs-2';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Predictions=()=>{const[tickers,setTickers]=useState([]);const[selectedTicker,setSelectedTicker]=useState(null);const[chartData,setChartData]=useState(null);const[finalPrediction,setFinalPrediction]=useState(null);useEffect(()=>{fetch('http://backend:8081/api/tickers').then(response=>response.json()).then(data=>{console.log(\"Tickers fetched:\",data);const options=(data.content||[]).map(ticker=>({value:ticker.tickerId,label:ticker.tickerName}));setTickers(options);}).catch(error=>console.error(\"Error fetching tickers:\",error));},[]);const handleTickerChange=selectedOption=>{setSelectedTicker(selectedOption);axios.post('http://127.0.0.1:5001/predict',{ticker:selectedOption.value}).then(response=>{const data=response.data;setFinalPrediction(data.final_prediction);setChartData({labels:Array.from({length:data.actual_prices.length},(_,i)=>i+1),datasets:[{label:'Actual Prices',data:data.actual_prices,borderColor:'blue',fill:false},{label:'Predicted Prices',data:data.predicted_prices,borderColor:'green',fill:false}]});}).catch(error=>{var _error$response;console.error('Error fetching predictions:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Stock Price Predictions\"}),/*#__PURE__*/_jsx(Select,{options:tickers,onChange:handleTickerChange,placeholder:\"Select a Ticker\"}),selectedTicker&&/*#__PURE__*/_jsxs(\"h2\",{children:[\"Selected Ticker: \",selectedTicker.label]}),chartData&&/*#__PURE__*/_jsx(\"div\",{style:{width:\"80%\",height:\"400px\",margin:\"auto\"},children:/*#__PURE__*/_jsx(Line,{data:chartData,options:{responsive:true,maintainAspectRatio:false}})}),finalPrediction&&/*#__PURE__*/_jsxs(\"h3\",{children:[\"Final Predicted Price: $\",finalPrediction.toFixed(2)]})]});};export default Predictions;","map":{"version":3,"names":["React","useState","useEffect","Select","Line","axios","jsx","_jsx","jsxs","_jsxs","Predictions","tickers","setTickers","selectedTicker","setSelectedTicker","chartData","setChartData","finalPrediction","setFinalPrediction","fetch","then","response","json","data","console","log","options","content","map","ticker","value","tickerId","label","tickerName","catch","error","handleTickerChange","selectedOption","post","final_prediction","labels","Array","from","length","actual_prices","_","i","datasets","borderColor","fill","predicted_prices","_error$response","message","children","onChange","placeholder","style","width","height","margin","responsive","maintainAspectRatio","toFixed"],"sources":["C:/Users/User/Desktop/MacedonianStockAnalysis/HomeWork2/prototip/msa_frontend/src/pages/Predictions.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Select from 'react-select';\r\nimport {Line} from 'react-chartjs-2';\r\nimport axios from 'axios';\r\n\r\nconst Predictions = () => {\r\n    const [tickers, setTickers] = useState([]);\r\n    const [selectedTicker, setSelectedTicker] = useState(null);\r\n    const [chartData, setChartData] = useState(null);\r\n    const [finalPrediction, setFinalPrediction] = useState(null);\r\n    useEffect(() => {\r\n        fetch('http://backend:8081/api/tickers')\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                console.log(\"Tickers fetched:\", data);\r\n                const options = (data.content || []).map(ticker => ({\r\n                    value: ticker.tickerId,\r\n                    label: ticker.tickerName,\r\n                }));\r\n                setTickers(options);\r\n            })\r\n            .catch(error => console.error(\"Error fetching tickers:\", error));\r\n\r\n    }, []);\r\n\r\n\r\n    const handleTickerChange = (selectedOption) => {\r\n        setSelectedTicker(selectedOption);\r\n\r\n\r\n        axios\r\n            .post('http://127.0.0.1:5001/predict', { ticker: selectedOption.value })\r\n            .then(response => {\r\n                const data = response.data;\r\n\r\n\r\n                setFinalPrediction(data.final_prediction);\r\n                setChartData({\r\n                    labels: Array.from({ length: data.actual_prices.length }, (_, i) => i + 1),\r\n                    datasets: [\r\n                        {\r\n                            label: 'Actual Prices',\r\n                            data: data.actual_prices,\r\n                            borderColor: 'blue',\r\n                            fill: false,\r\n                        },\r\n                        {\r\n                            label: 'Predicted Prices',\r\n                            data: data.predicted_prices,\r\n                            borderColor: 'green',\r\n                            fill: false,\r\n                        },\r\n                    ],\r\n                });\r\n            })\r\n            .catch(error => {\r\n                console.error('Error fetching predictions:', error.response?.data || error.message);\r\n            });\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <h1>Stock Price Predictions</h1>\r\n\r\n            <Select\r\n                options={tickers}\r\n                onChange={handleTickerChange}\r\n                placeholder=\"Select a Ticker\"\r\n            />\r\n            {selectedTicker && <h2>Selected Ticker: {selectedTicker.label}</h2>}\r\n            {chartData && (\r\n                <div style={{ width: \"80%\", height: \"400px\", margin: \"auto\" }}>\r\n                    <Line\r\n                        data={chartData}\r\n                        options={{\r\n                            responsive: true,\r\n                            maintainAspectRatio: false,\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n            {finalPrediction && <h3>Final Predicted Price: ${finalPrediction.toFixed(2)}</h3>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Predictions;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}