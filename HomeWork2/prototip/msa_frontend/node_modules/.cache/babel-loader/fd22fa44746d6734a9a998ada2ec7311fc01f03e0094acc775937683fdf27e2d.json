{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import styles from'./TableHistory.module.css';import Transaction from\"./Transaction\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TableHistory=()=>{const[details,setDetails]=useState([]);const[currentPage,setCurrentPage]=useState(0);const[totalPages,setTotalPages]=useState(0);const fetchPage=currentPage=>{fetch(`http://backend:8081/api/ticker-values?page=${currentPage}&size=20`).then(response=>response.json()).then(data=>{console.log(\"Details fetched:\",data);setDetails(data.content||[]);setTotalPages(data.totalPages||0);}).catch(error=>console.error(\"Error fetching details:\",error));};useEffect(()=>{fetchPage(currentPage);},[currentPage]);const handleNext=()=>{if(currentPage<totalPages-1){setCurrentPage(prevPage=>prevPage+1);}};const handlePrevious=()=>{if(currentPage>0){setCurrentPage(prevPage=>prevPage-1);}};const headers=[{id:'ticker',label:'Ticker'},{id:'max',label:'Max'},{id:'min',label:'Min'},{id:'date',label:'Date'},{id:'lastPrice',label:'Price of last\\ntransaction',isLast:true}];const handleDelete=code=>{console.log(\"Delete transaction with code:\",code);};const handleEdit=code=>{console.log(\"Edit transaction with code:\",code);};return/*#__PURE__*/_jsxs(\"div\",{className:styles.tableWrapper,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.tableHeader,children:/*#__PURE__*/_jsx(\"div\",{className:styles.headerRow,role:\"row\",children:headers.map(header=>/*#__PURE__*/_jsx(\"div\",{className:header.isLast?styles.lastPriceCell:styles.headerCell,role:\"columnheader\",tabIndex:0,children:header.label},header.id))})}),/*#__PURE__*/_jsx(\"div\",{className:styles.tableBody,children:details.length===0?/*#__PURE__*/_jsx(\"div\",{children:\"No data available\"}):details.map(row=>/*#__PURE__*/_jsx(Transaction,{transactionData:row,onDelete:handleDelete,onEdit:handleEdit},row.value_id))}),/*#__PURE__*/_jsxs(\"div\",{className:styles.paginationControls,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevious,disabled:currentPage===0,children:\"Previous\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Page \",currentPage+1,\" of \",totalPages]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNext,disabled:currentPage>=totalPages-1,children:\"Next\"})]})]});};export default TableHistory;","map":{"version":3,"names":["React","useEffect","useState","styles","Transaction","jsx","_jsx","jsxs","_jsxs","TableHistory","details","setDetails","currentPage","setCurrentPage","totalPages","setTotalPages","fetchPage","fetch","then","response","json","data","console","log","content","catch","error","handleNext","prevPage","handlePrevious","headers","id","label","isLast","handleDelete","code","handleEdit","className","tableWrapper","children","tableHeader","headerRow","role","map","header","lastPriceCell","headerCell","tabIndex","tableBody","length","row","transactionData","onDelete","onEdit","value_id","paginationControls","onClick","disabled"],"sources":["C:/Users/User/Desktop/MacedonianStockAnalysis/HomeWork2/prototip/msa_frontend/src/components/history/TableHistory.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport styles from './TableHistory.module.css';\r\nimport Transaction from \"./Transaction\";\r\n\r\nconst TableHistory = () => {\r\n\r\n    const [details, setDetails] = useState([]);\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [totalPages, setTotalPages] = useState(0);\r\n\r\n    const fetchPage = (currentPage) => {\r\n        fetch(`http://backend:8081/api/ticker-values?page=${currentPage}&size=20`)\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(\"Details fetched:\", data);\r\n                setDetails(data.content || []);\r\n                setTotalPages(data.totalPages || 0);\r\n            })\r\n            .catch((error) => console.error(\"Error fetching details:\", error));\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchPage(currentPage)\r\n    }, [currentPage]);\r\n\r\n    const handleNext = () => {\r\n        if (currentPage < totalPages - 1) {\r\n            setCurrentPage((prevPage) => prevPage + 1);\r\n        }\r\n    };\r\n\r\n    const handlePrevious = () => {\r\n        if (currentPage > 0) {\r\n            setCurrentPage((prevPage) => prevPage - 1);\r\n        }\r\n    };\r\n\r\n\r\n    const headers = [\r\n        {id: 'ticker', label: 'Ticker'},\r\n        {id: 'max', label: 'Max'},\r\n        {id: 'min', label: 'Min'},\r\n        {id: 'date', label: 'Date'},\r\n        {id: 'lastPrice', label: 'Price of last\\ntransaction', isLast: true}\r\n    ];\r\n\r\n    const handleDelete = (code) => {\r\n        console.log(\"Delete transaction with code:\", code);\r\n\r\n    };\r\n\r\n    const handleEdit = (code) => {\r\n        console.log(\"Edit transaction with code:\", code);\r\n\r\n    };\r\n\r\n    return (\r\n        <div className={styles.tableWrapper}>\r\n            {/* Table Header */}\r\n            <div className={styles.tableHeader}>\r\n                <div className={styles.headerRow} role=\"row\">\r\n                    {headers.map((header) => (\r\n                        <div\r\n                            key={header.id}\r\n                            className={header.isLast ? styles.lastPriceCell : styles.headerCell}\r\n                            role=\"columnheader\"\r\n                            tabIndex={0}\r\n                        >\r\n                            {header.label}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Table Body */}\r\n            <div className={styles.tableBody}>\r\n                {details.length === 0 ? (\r\n                    <div>No data available</div>\r\n                ) : (\r\n                    details.map((row) => (\r\n                        <Transaction\r\n                            key={row.value_id}\r\n                            transactionData={row}\r\n                            onDelete={handleDelete}\r\n                            onEdit={handleEdit}\r\n                        />\r\n                    ))\r\n                )}\r\n            </div>\r\n            {/* Pagination Controls */}\r\n            <div className={styles.paginationControls}>\r\n                <button onClick={handlePrevious} disabled={currentPage === 0}>\r\n                    Previous\r\n                </button>\r\n                <span>\r\n                    Page {currentPage + 1} of {totalPages}\r\n                </span>\r\n                <button\r\n                    onClick={handleNext}\r\n                    disabled={currentPage >= totalPages - 1}\r\n                >\r\n                    Next\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default TableHistory;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}